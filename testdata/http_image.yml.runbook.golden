-- -testdata-book-http_image.yml --
desc: Captured of http_image.yml run
labels:
- http
- openapi3
runners:
  req:
    endpoint: ${TEST_HTTP_ENDPOINT:-https:example.com}
    openapi3: ../openapi3.yml
steps:
- req:
    /upload:
      put:
        body:
          image/png: !!binary iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAFTWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjUwIgogICBleGlmOlBpeGVsWURpbWVuc2lvbj0iNTAiCiAgIGV4aWY6Q29sb3JTcGFjZT0iMSIKICAgdGlmZjpJbWFnZVdpZHRoPSI1MCIKICAgdGlmZjpJbWFnZUxlbmd0aD0iNTAiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249IjcyLzEiCiAgIHRpZmY6WVJlc29sdXRpb249IjcyLzEiCiAgIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiCiAgIHBob3Rvc2hvcDpJQ0NQcm9maWxl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
  test: |
    current.res.status == 201
    && current.res.headers["Content-Length"][0] == "23"
    && current.res.headers["Content-Type"][0] == "image/png"
    && "Date" in current.res.headers
    && current.res.rawBody == "<h1>Image Uploaded</h1>"
